import{a as W,b as z}from"./chunk-3OILUNXE.js";import{a as M,b as j}from"./chunk-3ECXM4KS.js";import{a as g,b as N,d as I}from"./chunk-WYIE2SNB.js";import{a as w}from"./chunk-4AQIKSTI.js";import{b as D,c as E,d as F}from"./chunk-657E2MCB.js";import{$a as m,Cb as k,Db as _,Ja as n,Ob as y,Q as x,Qa as v,U as b,V as A,X as d,ab as T,ca as f,cb as S,fb as u,hb as $,i as P,ib as L,jb as r,kb as s,ob as h,pb as B,r as c,xb as a,zb as C}from"./chunk-NIGT2CQE.js";var q=(e,o)=>o.getName(),O=(e,o)=>({"font-semibold":e,"font-normal":o}),G=e=>({itemPerPage:e});function H(e,o){e&1&&a(0,"0 Auteur.")}function J(e,o){e&1&&a(0,"1 Auteur.")}function K(e,o){if(e&1&&a(0),e&2){let t=B();C("",t.authorsCount()," Auteurs.")}}function Q(e,o){if(e&1&&(r(0,"li",8)(1,"app-link-cites-by-author",13)(2,"small"),a(3),s()()()),e&2){let t=o.$implicit;n(),u("author",t.getName()),n(2),C("(",t.getCount(),")")}}var lt=(()=>{class e extends M{authorService=f(z);device=f(I);sort=m("text");isSortByText=y(()=>this.sort()==="text");isSortByTotal=y(()=>this.sort()==="total");authors=m([]);authors$=N(this.sort).pipe(A(t=>t==="text"?this.authorService.authors$:this.authorService.authors$.pipe(c(l=>l.sort((i,p)=>i.getCount()>p.getCount()?-1:i.getCount()<p.getCount()?1:0)))),d(t=>this.authors.set(t)),g());authorsCount=m(0);authorsCount$=this.authors$.pipe(c(t=>t.length),b(0),d(t=>this.authorsCount.set(t)),g());pagerPaginatedAuthors$=new P;displayedPaginatedAuthors=m([]);displayedPaginatedAuthors$=this.authors$.pipe(x(this.pagerPaginatedAuthors$),c(t=>t.slice(0,this.itemsPerPage)),d(t=>this.displayedPaginatedAuthors.set(t)),g());currentPage=0;itemsPerPage=11;constructor(){super(),this.device.isMobile()&&(this.itemsPerPage=8),this.authors$.subscribe(),this.authorsCount$.subscribe(),this.displayedPaginatedAuthors$.subscribe()}sortByAuthor(){this.sort.set("text")}sortByCount(){this.sort.set("total")}setPaginatedList(t){t[0]&&(t[0]instanceof W||!t[0])&&this.pagerPaginatedAuthors$.next(t)}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=v({type:e,selectors:[["app-list-authors"]],features:[T],decls:16,vars:15,consts:[[1,"container","mb-36"],[1,"text-3xl","font-bold","text-stone-900","mb-2",3,"ngPlural"],["ngPluralCase","=0"],["ngPluralCase","=1"],["ngPluralCase","other"],["title","Trier par nom",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full","mr-2",3,"click","ngClass","disabled"],["title","Trier par total de citations",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full",3,"click","ngClass","disabled"],[1,"list-none"],[1,"p-1"],[1,"container"],[1,"w-full"],["id","bottom-navigation",1,"block","fixed","inset-x-0","bottom-10","z-10","bg-white"],[3,"paginatedList$","list","options"],[3,"author"]],template:function(l,i){l&1&&(r(0,"div",0)(1,"h1",1),S(2,H,1,0,"ng-template",2)(3,J,1,0,"ng-template",3)(4,K,1,1,"ng-template",4),s(),r(5,"button",5),h("click",function(){return i.sortByAuthor()}),a(6," Trier par nom "),s(),r(7,"button",6),h("click",function(){return i.sortByCount()}),a(8," Trier par total "),s(),r(9,"ul",7),$(10,Q,4,2,"li",8,q),s()(),r(12,"div",9)(13,"div",10)(14,"section",11)(15,"app-pager",12),h("paginatedList$",function(U){return i.setPaginatedList(U)}),s()()()()),l&2&&(n(),u("ngPlural",i.authorsCount()),n(4),u("ngClass",_(7,O,i.isSortByText()===!0,i.isSortByText()===!1))("disabled",i.isSortByText()),n(2),u("ngClass",_(10,O,i.isSortByTotal(),i.isSortByTotal()))("disabled",i.isSortByTotal()),n(3),L(i.displayedPaginatedAuthors()),n(5),u("list",i.authors())("options",k(13,G,i.getItemsPerPage())))},dependencies:[D,E,F,w,j],encapsulation:2,changeDetection:0})}return e})();export{lt as ListAuthorsComponent};
