{
  "version": 3,
  "sources": ["src/app/components/list-cites/list-cites.component.ts"],
  "sourcesContent": ["/* eslint-disable prettier/prettier */\nimport { Component, Input, OnInit } from '@angular/core';\nimport { CiteI } from '../../models/Cite';\nimport { RouterLink } from '@angular/router';\nimport { Cites } from '../../services/Cites';\nimport { Title } from '@angular/platform-browser';\nimport { Device } from '../../tools/Device';\nimport { BasePaginatedComponent } from '../common/BasePaginatedComponent';\nimport { PagerComponent } from '../pager/pager.component';\nimport { LinkCitesByAuthorComponent } from '../link-cites-by-author/link-cites-by-author.component';\nimport { NgIf, NgPlural, NgPluralCase, NgFor } from '@angular/common';\nimport { BehaviorSubject, filter } from 'rxjs';\nimport { OnChanges } from '@angular/core';\n\n@Component({\n  selector: 'app-list-cites',\n  template: `\n    <div class=\"container mb-36\">\n      <h1 class=\"text-3xl font-bold text-stone-900 mb-2\">\n        <a [queryParams]=\"null\" routerLink=\"/cites\"\n          >{{ citeService.countSearchFoundCites() }} Citations.</a\n        >\n      </h1>\n\n      @if (q) {\n      <h2 [ngPlural]=\"cites.length\" class=\"text-md text-gray-600\">\n        <ng-template ngPluralCase=\"=0\"\n          >Aucune citation trouvée pour la recherche \"{{\n            q\n          }}\"&nbsp;</ng-template\n        >\n        <ng-template ngPluralCase=\"=1\"\n          >{{ cites.length }} citation trouvée pour la recherche \"{{\n            q\n          }}\":&nbsp;</ng-template\n        >\n        <ng-template ngPluralCase=\"other\"\n          >{{ cites.length }} citations trouvées pour la recherche \"{{\n            q\n          }}\":&nbsp;</ng-template\n        >\n      </h2>\n      }\n\n      <ul class=\"list-none\">\n        @for (item of paginatedCites; track item.getId()) {\n        <li\n          class=\"p-1\"\n        >\n          <cite>”{{ item.getCite() }}”</cite> de\n          <app-link-cites-by-author\n            [author]=\"item.getAuthor()\"\n          ></app-link-cites-by-author>\n        </li>\n        }\n      </ul>\n    </div>\n\n    <div class=\"container\">\n      <div class=\"w-full\">\n        <section\n          class=\"block fixed inset-x-0 bottom-10 z-10 bg-white\"\n          id=\"bottom-navigation\"\n        >\n          <app-pager\n            [list]=\"cites\"\n            [options]=\"{ itemPerPage: getItemsPerPage() }\"\n            (paginatedList$)=\"setPaginatedList($event)\"\n          ></app-pager>\n        </section>\n      </div>\n    </div>\n  `,\n  providers: [],\n  standalone: true,\n  imports: [\n    RouterLink,\n    NgPlural,\n    NgPluralCase,\n    LinkCitesByAuthorComponent,\n    PagerComponent,\n  ],\n})\nexport class ListCitesComponent\n  extends BasePaginatedComponent\n  implements OnInit, OnChanges\n{\n  @Input() q!: string;\n  protected cites: CiteI[] = [];\n  protected paginatedCites: CiteI[] = [];\n\n  constructor(\n    public citeService: Cites,\n    protected title: Title,\n    protected device: Device\n  ) {\n    super();\n    this.title.setTitle('Citations - Liste des citations');\n    this.itemsPerPage = 12;\n    if (device.isMobile()) {\n      this.itemsPerPage = 4;\n    }\n  }\n\n  ngOnInit(): void {\n    this.citeService.cites$.subscribe({\n      next: (next: CiteI[]) => {\n        this.fillCites(next);\n      },\n    });\n\n    this.findCitesBySearch();\n  }\n\n  ngOnChanges(): void {\n    this.findCitesBySearch();\n  }\n\n  protected findCitesBySearch() {\n    // prerender crash without the first check\n    if (this.q && this.q.trim() === '') {\n      this.citeService.reset().subscribe();\n\n      return;\n    }\n\n    this.citeService.search(this.q).subscribe((next) => this.fillCites(next));\n  }\n\n  protected fillCites(citesList: CiteI[]): void {\n    this.cites = [];\n    this.paginatedCites = [];\n    citesList.forEach((cite, index) => {\n      this.cites.push(cite);\n    });\n    this.paginatedCites = this.cites.slice(0, this.itemsPerPage);\n  }\n\n  setPaginatedList(ev: CiteI[]): void {\n    this.paginatedCites = ev;\n  }\n}\n"],
  "mappings": "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",
  "names": ["i0", "\u0275\u0275text", "\u0275\u0275textInterpolate1", "ctx_r2", "q", "\u0275\u0275textInterpolate2", "ctx_r3", "cites", "length", "ctx_r4", "\u0275\u0275elementStart", "\u0275\u0275template", "ListCitesComponent_Conditional_4_ng_template_1_Template", "ListCitesComponent_Conditional_4_ng_template_2_Template", "ListCitesComponent_Conditional_4_ng_template_3_Template", "\u0275\u0275elementEnd", "\u0275\u0275property", "ctx_r0", "\u0275\u0275element", "\u0275\u0275advance", "item_r5", "getCite", "getAuthor", "ListCitesComponent", "BasePaginatedComponent", "constructor", "citeService", "title", "device", "paginatedCites", "setTitle", "itemsPerPage", "isMobile", "ngOnInit", "cites$", "subscribe", "next", "fillCites", "findCitesBySearch", "ngOnChanges", "trim", "reset", "search", "citesList", "forEach", "cite", "index", "push", "slice", "setPaginatedList", "ev", "\u0275\u0275directiveInject", "Cites", "Title", "Device", "selectors", "inputs", "standalone", "features", "\u0275\u0275ProvidersFeature", "\u0275\u0275InheritDefinitionFeature", "\u0275\u0275NgOnChangesFeature", "\u0275\u0275StandaloneFeature", "decls", "vars", "consts", "template", "ListCitesComponent_Template", "rf", "ctx", "ListCitesComponent_Conditional_4_Template", "\u0275\u0275repeaterCreate", "ListCitesComponent_For_7_Template", "_forTrack0", "\u0275\u0275listener", "ListCitesComponent_Template_app_pager_paginatedList__11_listener", "$event", "countSearchFoundCites", "\u0275\u0275conditional", "\u0275\u0275repeater", "\u0275\u0275pureFunction1", "_c1", "getItemsPerPage", "RouterLink", "NgPlural", "NgPluralCase", "LinkCitesByAuthorComponent", "PagerComponent", "encapsulation"]
}
