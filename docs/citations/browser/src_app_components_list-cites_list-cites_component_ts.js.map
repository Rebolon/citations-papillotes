{"version":3,"file":"src_app_components_list-cites_list-cites_component_ts.js","mappings":"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","sources":["./src/app/components/list-cites/list-cites.component.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { CiteI } from '../../models/Cite';\nimport { RouterLink } from '@angular/router';\nimport { Cites } from '../../services/Cites';\nimport { Title } from '@angular/platform-browser';\nimport { Device } from '../../tools/Device';\nimport { BasePaginatedComponent } from '../common/BasePaginatedComponent';\nimport { PagerComponent } from '../pager/pager.component';\nimport { LinkCitesByAuthorComponent } from '../link-cites-by-author/link-cites-by-author.component';\nimport { NgIf, NgPlural, NgPluralCase, NgFor } from '@angular/common';\nimport { BehaviorSubject, filter } from 'rxjs';\nimport { OnChanges } from '@angular/core';\n\n@Component({\n  selector: 'app-list-cites',\n  template: `\n    <div class=\"container mb-36\">\n      <h1 class=\"text-3xl font-bold text-stone-900 mb-2\">\n        <a routerLink=\"/cites\" queryParams=\"\"\n          >{{ citeService.countSearchFoundCites() }} Citations.</a\n        >\n      </h1>\n\n      <h2 *ngIf=\"q\" [ngPlural]=\"cites.length\" class=\"text-md text-gray-600\">\n        <ng-template ngPluralCase=\"=0\"\n          >Aucune citation trouvée pour la recherche \"{{\n            q\n          }}\"&nbsp;</ng-template\n        >\n        <ng-template ngPluralCase=\"=1\"\n          >{{ cites.length }} citation trouvée pour la recherche \"{{\n            q\n          }}\":&nbsp;</ng-template\n        >\n        <ng-template ngPluralCase=\"other\"\n          >{{ cites.length }} citations trouvées pour la recherche \"{{\n            q\n          }}\":&nbsp;</ng-template\n        >\n      </h2>\n\n      <ul class=\"list-none\">\n        <li\n          *ngFor=\"let item of paginatedCites; trackBy: trackByCiteId\"\n          class=\"p-1\"\n        >\n          <cite>”{{ item.getCite() }}”</cite> de\n          <app-link-cites-by-author\n            [author]=\"item.getAuthor()\"\n          ></app-link-cites-by-author>\n        </li>\n      </ul>\n    </div>\n\n    <div class=\"container\">\n      <div class=\"w-full\">\n        <section\n          class=\"block fixed inset-x-0 bottom-10 z-10 bg-white\"\n          id=\"bottom-navigation\"\n        >\n          <app-pager\n            [list]=\"cites\"\n            [options]=\"{ itemPerPage: getItemsPerPage() }\"\n            (paginatedList$)=\"setPaginatedList($event)\"\n          ></app-pager>\n        </section>\n      </div>\n    </div>\n  `,\n  styles: [],\n  providers: [Device],\n  standalone: true,\n  imports: [\n    RouterLink,\n    NgIf,\n    NgPlural,\n    NgPluralCase,\n    NgFor,\n    LinkCitesByAuthorComponent,\n    PagerComponent,\n  ],\n})\nexport class ListCitesComponent\n  extends BasePaginatedComponent\n  implements OnInit, OnChanges\n{\n  @Input() q: string;\n  protected cites: CiteI[] = [];\n  protected paginatedCites: CiteI[] = [];\n\n  constructor(\n    public citeService: Cites,\n    protected title: Title,\n    protected device: Device\n  ) {\n    super();\n    this.title.setTitle('Citations - Liste des citations');\n    this.itemsPerPage = 12;\n    if (device.isMobile()) {\n      this.itemsPerPage = 4;\n    }\n  }\n\n  ngOnInit(): void {\n    this.citeService.cites$.subscribe({\n      next: (next: CiteI[]) => {\n        this.fillCites(next);\n      },\n    });\n\n    this.findCitesBySearch();\n  }\n\n  ngOnChanges(): void {\n    this.findCitesBySearch();\n  }\n\n  protected findCitesBySearch() {\n    // prerender crash without the first check\n    if (this.q && this.q.trim() === '') {\n      this.citeService.reset().subscribe();\n\n      return;\n    }\n\n    this.citeService.search(this.q).subscribe((next) => this.fillCites(next));\n  }\n\n  protected fillCites(citesList: CiteI[]): void {\n    this.cites = [];\n    this.paginatedCites = [];\n    citesList.forEach((cite, index) => {\n      this.cites.push(cite);\n    });\n    this.paginatedCites = this.cites.slice(0, this.itemsPerPage);\n  }\n\n  protected trackByCiteId(index, cite: CiteI): number {\n    return cite.getId();\n  }\n\n  setPaginatedList(ev: CiteI[]): void {\n    this.paginatedCites = ev;\n  }\n}\n"],"names":["RouterLink","Device","BasePaginatedComponent","PagerComponent","LinkCitesByAuthorComponent","NgIf","NgPlural","NgPluralCase","NgFor","i0","ɵɵtext","ɵɵtextInterpolate1","ctx_r2","q","ɵɵtextInterpolate2","ctx_r3","cites","length","ctx_r4","ɵɵelementStart","ɵɵtemplate","ListCitesComponent_h2_4_ng_template_1_Template","ListCitesComponent_h2_4_ng_template_2_Template","ListCitesComponent_h2_4_ng_template_3_Template","ɵɵelementEnd","ɵɵproperty","ctx_r0","ɵɵelement","ɵɵadvance","item_r5","getCite","getAuthor","ListCitesComponent","constructor","citeService","title","device","paginatedCites","setTitle","itemsPerPage","isMobile","ngOnInit","cites$","subscribe","next","fillCites","findCitesBySearch","ngOnChanges","trim","reset","search","citesList","forEach","cite","index","push","slice","trackByCiteId","getId","setPaginatedList","ev","ɵɵdirectiveInject","i1","Cites","i2","Title","i3","selectors","inputs","standalone","features","ɵɵProvidersFeature","ɵɵInheritDefinitionFeature","ɵɵNgOnChangesFeature","ɵɵStandaloneFeature","decls","vars","consts","template","ListCitesComponent_Template","rf","ctx","ListCitesComponent_h2_4_Template","ListCitesComponent_li_6_Template","ɵɵlistener","ListCitesComponent_Template_app_pager_paginatedList__10_listener","$event","countSearchFoundCites","ɵɵpureFunction1","_c0","getItemsPerPage","encapsulation"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}