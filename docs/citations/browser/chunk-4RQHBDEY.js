import{a as z,b as O}from"./chunk-2TYHMYVA.js";import{a as j,b as W}from"./chunk-EH6WZ6MO.js";import{a as f,b as w,d as M}from"./chunk-TYD4F3NZ.js";import{b as E,c as F,d as I,o as N}from"./chunk-WCIG5XE2.js";import{$a as p,Ab as D,Bb as _,Ja as o,Mb as x,Q as P,Qa as A,U as b,V as v,X as d,ab as T,ca as C,cb as S,fb as m,hb as L,i as y,ib as $,jb as r,kb as a,ob as h,pb as B,qb as k,r as c,vb as s,xb as g}from"./chunk-RANHGFWP.js";var q=(e,n)=>n.getName(),R=(e,n)=>({"font-semibold":e,"font-normal":n}),G=e=>({itemPerPage:e});function H(e,n){e&1&&s(0,"0 Auteur.")}function J(e,n){e&1&&s(0,"1 Auteur.")}function K(e,n){if(e&1&&s(0),e&2){let t=B();g("",t.authorsCount()," Auteurs.")}}function Q(e,n){if(e&1&&(r(0,"li",8)(1,"a",13),s(2),r(3,"small"),s(4),a()()()),e&2){let t=n.$implicit;o(),k("routerLink","/authors/",t.getName(),""),o(),g("",t.getName()," "),o(2),g("(",t.getCount(),")")}}var ut=(()=>{class e extends j{authorService=C(O);device=C(M);sort=p("text");isSortByText=x(()=>this.sort()==="text");isSortByTotal=x(()=>this.sort()==="total");authors=p([]);authors$=w(this.sort).pipe(v(t=>t==="text"?this.authorService.authors$:this.authorService.authors$.pipe(c(l=>l.sort((i,u)=>i.getCount()>u.getCount()?-1:i.getCount()<u.getCount()?1:0)))),d(t=>this.authors.set(t)),f());authorsCount=p(0);authorsCount$=this.authors$.pipe(c(t=>t.length),b(0),d(t=>this.authorsCount.set(t)),f());pagerPaginatedAuthors$=new y;displayedPaginatedAuthors=p([]);displayedPaginatedAuthors$=this.authors$.pipe(P(this.pagerPaginatedAuthors$),c(t=>t.slice(0,this.itemsPerPage)),d(t=>this.displayedPaginatedAuthors.set(t)),f());currentPage=0;itemsPerPage=11;constructor(){super(),this.device.isMobile()&&(this.itemsPerPage=8),this.authors$.subscribe(),this.authorsCount$.subscribe(),this.displayedPaginatedAuthors$.subscribe()}sortByAuthor(){this.sort.set("text")}sortByCount(){this.sort.set("total")}setPaginatedList(t){t[0]&&(t[0]instanceof z||!t[0])&&this.pagerPaginatedAuthors$.next(t)}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=A({type:e,selectors:[["app-list-authors"]],features:[T],decls:16,vars:15,consts:[[1,"container","mb-36"],[1,"text-3xl","font-bold","text-stone-900","mb-2",3,"ngPlural"],["ngPluralCase","=0"],["ngPluralCase","=1"],["ngPluralCase","other"],["title","Trier par nom",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full","mr-2",3,"click","ngClass","disabled"],["title","Trier par total de citations",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full",3,"click","ngClass","disabled"],[1,"list-none"],[1,"p-1"],[1,"container"],[1,"w-full"],["id","bottom-navigation",1,"block","fixed","inset-x-0","bottom-10","z-10","bg-white"],[3,"paginatedList$","list","options"],[3,"routerLink"]],template:function(l,i){l&1&&(r(0,"div",0)(1,"h1",1),S(2,H,1,0,"ng-template",2)(3,J,1,0,"ng-template",3)(4,K,1,1,"ng-template",4),a(),r(5,"button",5),h("click",function(){return i.sortByAuthor()}),s(6," Trier par nom "),a(),r(7,"button",6),h("click",function(){return i.sortByCount()}),s(8," Trier par total "),a(),r(9,"ul",7),L(10,Q,5,4,"li",8,q),a()(),r(12,"div",9)(13,"div",10)(14,"section",11)(15,"app-pager",12),h("paginatedList$",function(U){return i.setPaginatedList(U)}),a()()()()),l&2&&(o(),m("ngPlural",i.authorsCount()),o(4),m("ngClass",_(7,R,i.isSortByText()===!0,i.isSortByText()===!1))("disabled",i.isSortByText()),o(2),m("ngClass",_(10,R,i.isSortByTotal(),i.isSortByTotal()))("disabled",i.isSortByTotal()),o(3),$(i.displayedPaginatedAuthors()),o(5),m("list",i.authors())("options",D(13,G,i.getItemsPerPage())))},dependencies:[E,F,I,N,W],encapsulation:2,changeDetection:0})}return e})();export{ut as ListAuthorsComponent};
