import{a as U,b as q}from"./chunk-CD7JKDNI.mjs";import{a as z,b as O}from"./chunk-KBQ5J7OH.mjs";import{a as g,b as M,d as W}from"./chunk-2C53ES2I.mjs";import{a as j}from"./chunk-CIYUWXUY.mjs";import"./chunk-OQI5WUX7.mjs";import{$a as a,Ca as n,Ea as S,G as b,Ha as m,Ia as $,J as A,Ja as L,K as v,La as u,M as d,N as J,Na as B,Oa as k,Pa as r,Qa as s,Ta as h,Ua as D,bb as C,eb as E,f as P,fb as _,j as x,ja as T,jb as y,nb as F,oa as f,pb as w,qb as N,r as c,rb as I,ub as K}from"./chunk-6SRRDQHX.mjs";P();T();K();F();J();F();var Q=(e,o)=>o.getName(),G=(e,o)=>({"font-semibold":e,"font-normal":o}),R=e=>({itemPerPage:e});function V(e,o){e&1&&a(0,"0 Auteur.")}function X(e,o){e&1&&a(0,"1 Auteur.")}function Y(e,o){if(e&1&&a(0),e&2){let t=D();C("",t.authorsCount()," Auteurs.")}}function Z(e,o){if(e&1&&(r(0,"li",8)(1,"app-link-cites-by-author",13)(2,"small"),a(3),s()()()),e&2){let t=o.$implicit;n(),u("author",t.getName()),n(2),C("(",t.getCount(),")")}}var dt=(()=>{class e extends z{authorService=f(q);device=f(W);sort=m("text");isSortByText=y(()=>this.sort()==="text");isSortByTotal=y(()=>this.sort()==="total");authors=m([]);authors$=M(this.sort).pipe(v(t=>t==="text"?this.authorService.authors$:this.authorService.authors$.pipe(c(l=>l.sort((i,p)=>i.getCount()>p.getCount()?-1:i.getCount()<p.getCount()?1:0)))),d(t=>this.authors.set(t)),g());authorsCount=m(0);authorsCount$=this.authors$.pipe(c(t=>t.length),A(0),d(t=>this.authorsCount.set(t)),g());pagerPaginatedAuthors$=new x;displayedPaginatedAuthors=m([]);displayedPaginatedAuthors$=this.authors$.pipe(b(this.pagerPaginatedAuthors$),c(t=>t.slice(0,this.itemsPerPage)),d(t=>this.displayedPaginatedAuthors.set(t)),g());currentPage=0;itemsPerPage=11;constructor(){super(),this.device.isMobile()&&(this.itemsPerPage=8),this.authors$.subscribe(),this.authorsCount$.subscribe(),this.displayedPaginatedAuthors$.subscribe()}sortByAuthor(){this.sort.set("text")}sortByCount(){this.sort.set("total")}setPaginatedList(t){t[0]&&(t[0]instanceof U||!t[0])&&this.pagerPaginatedAuthors$.next(t)}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=S({type:e,selectors:[["app-list-authors"]],features:[$],decls:16,vars:15,consts:[[1,"container","mb-36"],[1,"text-3xl","font-bold","text-stone-900","mb-2",3,"ngPlural"],["ngPluralCase","=0"],["ngPluralCase","=1"],["ngPluralCase","other"],["title","Trier par nom",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full","mr-2",3,"click","ngClass","disabled"],["title","Trier par total de citations",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full",3,"click","ngClass","disabled"],[1,"list-none"],[1,"p-1"],[1,"container"],[1,"w-full"],["id","bottom-navigation",1,"block","fixed","inset-x-0","bottom-10","z-10","bg-white"],[3,"paginatedList$","list","options"],[3,"author"]],template:function(l,i){l&1&&(r(0,"div",0)(1,"h1",1),L(2,V,1,0,"ng-template",2)(3,X,1,0,"ng-template",3)(4,Y,1,1,"ng-template",4),s(),r(5,"button",5),h("click",function(){return i.sortByAuthor()}),a(6," Trier par nom "),s(),r(7,"button",6),h("click",function(){return i.sortByCount()}),a(8," Trier par total "),s(),r(9,"ul",7),B(10,Z,4,2,"li",8,Q),s()(),r(12,"div",9)(13,"div",10)(14,"section",11)(15,"app-pager",12),h("paginatedList$",function(H){return i.setPaginatedList(H)}),s()()()()),l&2&&(n(),u("ngPlural",i.authorsCount()),n(4),u("ngClass",_(7,G,i.isSortByText()===!0,i.isSortByText()===!1))("disabled",i.isSortByText()),n(2),u("ngClass",_(10,G,i.isSortByTotal(),i.isSortByTotal()))("disabled",i.isSortByTotal()),n(3),k(i.displayedPaginatedAuthors()),n(5),u("list",i.authors())("options",E(13,R,i.getItemsPerPage())))},dependencies:[w,N,I,j,O],encapsulation:2,changeDetection:0})}return e})();export{dt as ListAuthorsComponent};
