import{a as U,b as q}from"./chunk-D7SNIHEO.mjs";import{a as O,b as R}from"./chunk-6P5HXWAH.mjs";import{a as f,b as W,d as z}from"./chunk-ZUF7CGOC.mjs";import"./chunk-52Y72HIO.mjs";import{Ba as o,Da as L,F as b,Ga as p,Ha as $,I as v,Ia as B,J as A,Ka as m,L as d,M as J,Ma as k,Na as D,Oa as r,Pa as a,Sa as h,Ta as E,Ua as F,W as T,Ya as s,_a as g,aa as K,bb as I,cb as _,f as y,gb as x,ia as S,j as P,kb as N,mb as w,na as C,nb as M,ob as j,q as c,rb as Q}from"./chunk-D654P62Y.mjs";y();S();Q();N();K();J();N();var V=(e,n)=>n.getName(),G=(e,n)=>({"font-semibold":e,"font-normal":n}),X=e=>({itemPerPage:e});function Y(e,n){e&1&&s(0,"0 Auteur.")}function Z(e,n){e&1&&s(0,"1 Auteur.")}function tt(e,n){if(e&1&&s(0),e&2){let t=E();g("",t.authorsCount()," Auteurs.")}}function et(e,n){if(e&1&&(r(0,"li",8)(1,"a",13),s(2),r(3,"small"),s(4),a()()()),e&2){let t=n.$implicit;o(),F("routerLink","/authors/",t.getName(),""),o(),g("",t.getName()," "),o(2),g("(",t.getCount(),")")}}var gt=(()=>{class e extends O{authorService=C(q);device=C(z);sort=p("text");isSortByText=x(()=>this.sort()==="text");isSortByTotal=x(()=>this.sort()==="total");authors=p([]);authors$=W(this.sort).pipe(A(t=>t==="text"?this.authorService.authors$:this.authorService.authors$.pipe(c(l=>l.sort((i,u)=>i.getCount()>u.getCount()?-1:i.getCount()<u.getCount()?1:0)))),d(t=>this.authors.set(t)),f());authorsCount=p(0);authorsCount$=this.authors$.pipe(c(t=>t.length),v(0),d(t=>this.authorsCount.set(t)),f());pagerPaginatedAuthors$=new P;displayedPaginatedAuthors=p([]);displayedPaginatedAuthors$=this.authors$.pipe(b(this.pagerPaginatedAuthors$),c(t=>t.slice(0,this.itemsPerPage)),d(t=>this.displayedPaginatedAuthors.set(t)),f());currentPage=0;itemsPerPage=11;constructor(){super(),this.device.isMobile()&&(this.itemsPerPage=8),this.authors$.subscribe(),this.authorsCount$.subscribe(),this.displayedPaginatedAuthors$.subscribe()}sortByAuthor(){this.sort.set("text")}sortByCount(){this.sort.set("total")}setPaginatedList(t){t[0]&&(t[0]instanceof U||!t[0])&&this.pagerPaginatedAuthors$.next(t)}static \u0275fac=function(l){return new(l||e)};static \u0275cmp=L({type:e,selectors:[["app-list-authors"]],features:[$],decls:16,vars:15,consts:[[1,"container","mb-36"],[1,"text-3xl","font-bold","text-stone-900","mb-2",3,"ngPlural"],["ngPluralCase","=0"],["ngPluralCase","=1"],["ngPluralCase","other"],["title","Trier par nom",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full","mr-2",3,"click","ngClass","disabled"],["title","Trier par total de citations",1,"bg-gray-100","text-violet-800","text-xs","inline-flex","items-center","px-2.5","py-0.5","rounded-full",3,"click","ngClass","disabled"],[1,"list-none"],[1,"p-1"],[1,"container"],[1,"w-full"],["id","bottom-navigation",1,"block","fixed","inset-x-0","bottom-10","z-10","bg-white"],[3,"paginatedList$","list","options"],[3,"routerLink"]],template:function(l,i){l&1&&(r(0,"div",0)(1,"h1",1),B(2,Y,1,0,"ng-template",2)(3,Z,1,0,"ng-template",3)(4,tt,1,1,"ng-template",4),a(),r(5,"button",5),h("click",function(){return i.sortByAuthor()}),s(6," Trier par nom "),a(),r(7,"button",6),h("click",function(){return i.sortByCount()}),s(8," Trier par total "),a(),r(9,"ul",7),k(10,et,5,4,"li",8,V),a()(),r(12,"div",9)(13,"div",10)(14,"section",11)(15,"app-pager",12),h("paginatedList$",function(H){return i.setPaginatedList(H)}),a()()()()),l&2&&(o(),m("ngPlural",i.authorsCount()),o(4),m("ngClass",_(7,G,i.isSortByText()===!0,i.isSortByText()===!1))("disabled",i.isSortByText()),o(2),m("ngClass",_(10,G,i.isSortByTotal(),i.isSortByTotal()))("disabled",i.isSortByTotal()),o(3),D(i.displayedPaginatedAuthors()),o(5),m("list",i.authors())("options",I(13,X,i.getItemsPerPage())))},dependencies:[w,M,j,T,R],encapsulation:2,changeDetection:0})}return e})();export{gt as ListAuthorsComponent};
